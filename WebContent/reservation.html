<!DOCTYPE html>
<html>
<head>
<meta name=viewport content="width=device-width, initial-scale=1, user-scalable=0">
<meta charset="UTF-8" />
<link rel="stylesheet" href="css/core.css">
<link rel="stylesheet" href="css/main.css">
<title>Fiore</title>
<style>
	.p{
	font-size:1.5em;
	font-weight:bold;
	font-family:"HY헤드라인M";
	}
	.drop .hide{display:none;}
</style>
</head>

<body>
	<div class="page-hdr"> Fiore </div>
	<div class="page-body">
	<ul class="page-mnu">
    	<li><a href="main.html">HOME</a></li>
    	<li style="background-color:lightgreen"><a href="reservation.html">꽃다발 예약</a></li>
    	<li><a href="onedayclass.html">원데이 클래스</a></li>
    	<li><a href="notice.html">공지사항</a></li>
    	<li><a href="mypage.html">마이 페이지</a></li>
    </ul>
    <div class="section pad-24 mtop-30">
  	<div><span class="p">꽃집</span> 알아보기</div><br>
	<!-- 지도 api -->
	<div id="map" style="width:100%;height:350px;"></div>
		<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2938f43df9209b84272d11be417f045a"></script>
		<script>
		var mapContainer = document.getElementById('map');
		var mapOptions = {
			center: new kakao.maps.LatLng(37.63948, 127.10985),
			level: 6
		};
		
		//지도 생성
		var map = new kakao.maps.Map(mapContainer, mapOptions);
		
		// 마커가 표시될 위치
		//var markerPosition  = new kakao.maps.LatLng(37.64287, 127.10526); //그린샵
		//var markerPosition2  = new kakao.maps.LatLng(37.63948, 127.10985); //청운꽃방
		var positions = [
			    {
			    	content: '<div style="padding:5px;"><center>그린샵</center><a href="https://map.kakao.com/link/map/그린샵, 37.64287, 127.10526" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/그린샵, 37.64287, 127.10526" style="color:blue" target="_blank">길찾기</a></div>', 
			        latlng: new kakao.maps.LatLng(37.64287, 127.10526)
			    },
			    {
			        content: '<div style="padding:5px;"><center>청운꽃방</center><a href="https://map.kakao.com/link/map/청운꽃방, 37.63948, 127.10985" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/청운꽃방, 37.63948, 127.10985" style="color:blue" target="_blank">길찾기</a></div>', 
			        latlng: new kakao.maps.LatLng(37.63948, 127.10985)
			    },
			    {
			        content: '<div style="padding:5px;"><center>라온플라워앤가든</center><a href="https://map.kakao.com/link/map/라온플라워앤가든, 37.63362, 127.11958" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/라온플라워앤가든, 37.63362, 127.11958" style="color:blue" target="_blank">길찾기</a></div>', 
			        latlng: new kakao.maps.LatLng(37.63362, 127.11958)
			    },
			    {
			        content: '<div style="padding:5px;"><center>파란마을</center><a href="https://map.kakao.com/link/map/파란마을,37.64171, 127.12131" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/파란마을, 37.64171, 127.12131" style="color:blue" target="_blank">길찾기</a></div>', 
			        latlng: new kakao.maps.LatLng(37.64171, 127.12131)
			    }
			    /*,{
			        content: '<div style="padding:5px;"><center>오직꽃</center><a href="https://map.kakao.com/link/map/오직꽃,37.63231, 127.11550" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/오직꽃, 37.63231, 127.11550" style="color:blue" target="_blank">길찾기</a></div>', 
			        latlng: new kakao.maps.LatLng(37.63231, 127.11550)
			    }*/
	    ];
		
		// 여러마커를 생성 + 여러 인포윈도우 생성
		for(var i=0; i<positions.length; i++) {
			
				var marker = new kakao.maps.Marker({
					map: map, // 마커를 표시할 지도
			        position: positions[i].latlng // 마커를 표시할 위치
				});
				marker.setMap(map);
				
				// 마커에 표시할 인포윈도우를 생성합니다 
			    var infowindow = new kakao.maps.InfoWindow({
			        content: positions[i].content // 인포윈도우에 표시할 내용
			    });
			    infowindow.open(map, marker); 
			    
			    //마우스 이벤트
			    //kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
			    //kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
				
		}
		/*
		// 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
		function makeOverListener(map, marker, infowindow) {
		    return function() {
		        infowindow.open(map, marker);
		    };
		}

		// 인포윈도우를 닫는 클로저를 만드는 함수입니다 
		function makeOutListener(infowindow) {
		    return function() {
		        infowindow.close();
		    };
		}*/
		
		//일일히 마커 생성 TEST
		/*var marker = new kakao.maps.Marker({
		    position: markerPosition
		});
		var marker2 = new kakao.maps.Marker({
		    position: markerPosition2
		});*/ 
		
		/*for(var t=0; t<iwpositions.length; t++){
			var infowindow = new kakao.maps.InfoWindow({
					map: map,
				    position : iwpositions[t].iwPosition, 
				    content : iwContent[t] 
			});
		}*/
		
		// 마커가 지도 위에 표시되도록 설정
		 //marker.setMap(map);
		 //marker2.setMap(map);
		
		// 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능.
		// var iwContent = '<div style="padding:5px;"><center>그린샵</center><a href="https://map.kakao.com/link/map/그린다 플라워, 37.64287, 127.10526" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/그린다 플라워, 37.64287, 127.10526" style="color:blue" target="_blank">길찾기</a></div>',
	   //인포윈도우 표시 위치
	 	//	iwPosition = new kakao.maps.LatLng(37.64287, 127.10526); 
	
		// 인포윈도우를 생성
		/*var infowindow = new kakao.maps.InfoWindow({
		    position : iwPosition, 
		    content : iwContent 
		});*/
		  
		// 마커 위에 인포윈도우를 표시. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됨.
		//infowindow.open(map, marker); 	
	</script>
	<hr>
	<div><span class="p">꽃</span> 예약하기</div><br>
	<div style="color:darkgray"> > 꽃다발 예약</div>
 	<div class="button" onclick="showseller()" style="color: red">판매자 리스트</div>
 		<table id="list2" border="1"></table>
	<div class="button" onclick=""> > 예약하기 </div>

	<a href="review.html"><div style="color:darkgray"> > 후기</div></a>
	</div>
	</div>
</body>
</html>
<script src="js/jquery-3.6.0.min.js"></script>
<script src="js/core.js"></script>
<script>
	$(document).ready(function(){
		Page.init();
	});

	hide3 = -1;
	function showseller(){
			if(hide3 == -1){
			var users;
			AJAX.call("jsp/sellerList.jsp", null, function(data){
				users = JSON.parse(data.trim());
				showseller2(users);// 스트링을 객체 형태로 바꿈, 배열이 된다.
			});
			hide3 = 0;
		}else{
			$("#list2").html("");
			hide3 = -1;
		}
	}
	
	// 판매자 리스트
	function showseller2(users){
		var str = "";
		str += "<tr><td colspan='7' style='text-align:center'>판매자 리스트</td>";
		str += "<tr>";
		str += "<td>선택</td>";
		str += "<td>가게번호</td>"
		str += "<td>가게이름</td>";
		str += "<td>가게주소</td>";
		str += "<td>구분</td>";
		str += "<td>아이디</td>"
		str += "<td>휴대폰 번호</td>";
		str += "</tr>";
		for(var i=0; i<users.length; i++){
			str += "<tr>";
			str += "<td><input type='radio' id='no' value='" + users[i].no + "'></td>"; 
			str += "<td>" + users[i].no + "</td>";
			str += "<td>" + users[i].storename + "</td>";
			str += "<td>" + users[i].storeaddress + "</td>";
			str += "<td>" + users[i].userclass + "</td>";
			str += "<td>" + users[i].id + "</td>";
			str += "<td>" + users[i].phonenum + "</td>";
			str += "</tr>";
		}
		$("#list2").html(str);
	}

</script>